
<html>
<head>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.cdnfonts.com/css/fake-receipt" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  
  <title>Frotu</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <style>
    html, body { margin: 0; height: 100%; background-color:grey;font-family:'Lato'}
    *{
    font-family:'Times New Roman';
    }
    .s {
      height: 100vh;
    }
    .sl {
      width: 100%;
      height: 100%;
      background: #ddd;
    }
    .sl1,.sl2,.sl11{
    background-color:black;
    }
    .sl11{
    color:white;
    }
    .sl3{
    background-color:black;
    width:100%;
    overflow-y:auto;
    }
    
    .seaEx{
    margin:5px;
    padding:10px 20px;
    display:flex;
    flex-direction:row;
    justify-content:space-between;
    align-items:center;
    }
    
    h3{
    color:#ff8c42;
    font-size:1.2rem;
    }
    
    .sumCat{
    display:flex;
    flex-direction:column;
    color:#ff8c42;
    width:90%;
    text-align:left;
    justify-content:center;
    align-items:space-around;
    margin:5px;
    padding:10px 10px;
    }
    .catSum{
    display:flex;
    flex-direction:column;
    justify-content:space-around;
    width:100%;
    }
    
    .catSum .cccat{
    display:flex;
    width:100%;
    justify-content:space-around;
    }
    
    .red{
    position:fixed;
    bottom:0px;
    margin:0px;
    padding:10px;
    display:flex;
    width:94%;
    justify-content:space-evenly;
    align-items:center;
    background-color:black;
    color:#ff8c42;
    border-top:1.5px solid grey;
    border-radius:15px;
    }
    .red span{
    border-radius:100px;
    font-size:2.4rem;
    background-color:black;
    }
    .red span:hover{
    color:white;
    }
    
    .swal2-input {
    width: 93% !important;
    box-sizing: border-box;
    margin:0px; 
    }
    
    .alll{
    background-color: #3b4f70;
    }
    
    
    #myInp {
    text-align: center;
    font-size: 20px;
    font-weight: bold;
    color: #333;
    border-radius: 8px;
    
    width: 78%;
    padding: 10px;
    margin-top: 10px;
    }
    
    table {
    width: 100%;
    border-collapse: collapse;
    }
    th, td {
    padding: 15px;
    text-align: left;
    font-size: 16px;
    }
    tr{
    border-bottom:1px solid grey;
    }
    th {
    background-color:transparent;
    color: #ff8c42;
    font-weight: bold;
    }
    td {
    background-color:transparent;
    color: #ffffff;
    }
    tr:hover td {
    background-color: #3b2f60;
    transition: 0.3s ease;
    }
    
    .famt{
    color:lightgreen;
    font-weight:bold;
    }
    
    .terb{
    height:72vh;
    overflow-y:scroll;
    
    }
    
    .seaEC{
    display:flex;
    justify-content:flex-end;
    gap:10px;
    align-items:center;
    }
    
    .seaEC input{
    
    background-color:transparent;
    width:50%;
    border-radius:7px;
    border:none;
    color:#ff8c42;
    transition:0.3s ease-out;
    }
    .seaEC input::placeholder,#seaa{
    color:grey;
    }
    
    .seaEC input:hover{
    
    width:80%;
    border:1.5px solid #ff8c42;
    }
    .frs thead tr, .frs tbody tr td{
    padding:2px;
    margin:2px;
    }
    
    #tabtran,.tabb{
    max-height:60vh;
    overflow-y:scroll;
    
    }
    
    .tabnkn{
    
    position:sticky;
    top:0;
    background-color:#3b2f60;
    color:black;
    }
    
    .mivnkn{
    display:flex;
    justify-content:space-between;
    margin:0px;
    padding:5px;
    background-color:#111;
    }
    
    .mivnkn i,.mivnkn button{
    
    background-color:transparent;
    border:0px solid black;
    color:#ff8c42;
    }
    
    .mivnkn i{
    color:#999;
    padding:3px;
    font-size:0.6rem;
    }
    .mivnkn button{
    font-size:1rem;
    
    }
    .mivnkn button:hover{
    color:white;
    }
    
    .frotuCh{
    
    padding:10px;
    display:flex;
    flex-direction:column;
    gap:20px;
    
    justify-content:center;
    align-items:center;
    margin:10px;
    }
    .frotuCh canvas{
    border-radius:10px;
    padding:10px;
    background-color:#222;
    }
    
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>
<body>
  <div class="swiper s">
  
 
    <div class="swiper-wrapper">
    
    <div class="swiper-slide sl sl11">
    
    we are wirking on wealth feature
    
    </div>
    
      <div class="swiper-slide sl sl1">
      
      <div class="red">
      
      <span onclick="location.href='finpulse.html'" class="bi bi-house"> </span><span onclick="addfrotuIS()" class="bi bi-plus">  </span><span onclick="location.href='#sea'" class="bi bi-arrow-up"> </span>
      
      
      </div>
      <div class="mivnkn">
      <button onclick="swiper.slideToLoop(0)"> <i class="fa-solid fa-less-than"></i>  Wealth </button> <button onclick="swiper.slideNext()"> Frotu Expences <i class="fa-solid fa-greater-than"></i></button>
      </div>
      <div id="ttt" class="seaEx">
      
      <h3 id="frt" style="margin:0;padding:0;padding:5px;font-size:1.5rem;">Frotu </h3>
      <div class="seaEC">
      <input oninput="srh('#tabgif tbody tr')" id="sea" type="text" placeholder="&#128269 Search.." > 
      
      </div>
      </div>
      
      <div class="terb">
      
      <div class="sumCat">
      <h3 id="fsu" style="margin:0;padding:0;padding:5px;text-align:center;"></h3>
      
      <table>
      <tr class="alll" onclick="nknall()" id="frrrc">
      <th> Category</th> <th> Sum </th>
      </tr>
      
      <tr onclick="undis('free')">
      <td> Free </td> <td id="ffr"> 0</td>
      </tr>
      
      <tr onclick="undis('reward')">
      <td> Rewards / Refunds </td> <td id="frew"> 0</td>
      </tr>
      
      <tr onclick="undis('passive')">
      <td> Passive Income </td> <td id="fpas"> 0</td>
      </tr>
      
      
      <tr onclick="undis('unknown')">
      <td> Unknown </td> <td id="fun"> 0</td>
      </tr>
      
      <tr onclick="undis('overtime')">
      <td> OverTime </td> <td id="fot"> 0</td>
      </tr>
      
      
      <tr onclick="undis('other')">
      <td> Other  </td> <td id="fo"> 0</td>
      </tr>
      
      
      </table>
      
      <br><br>
      
      <table id="tabgif">
      <thead>
      <tr>
      <th>Frotu</th>
      <th> Date</th>
      <th>From</th>
      </tr>
      </thead>
      <tbody class="frx" id="frodatr">
        
        </tbody>
      </table>
      
      </div>
      
      </div>
      
      
      </div>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <div class="swiper-slide sl sl2">
      
      <div class="red">
      
      <span onclick="location.href='finpulse.html'" class="bi bi-house"> </span><span onclick="addFrotuEX()" class="bi bi-plus">  </span><span onclick="location.href='#sea'" class="bi bi-arrow-up"> </span>
      
      
      </div>
      
      <div class="mivnkn">
      <button onclick="swiper.slideToLoop(1)"> <i class="fa-solid fa-less-than"></i>  Frotu </button>  <button onclick="swiper.slideToLoop(3)">  Graphs <i class="fa-solid fa-less-than"></i> </button>
      </div>
            <div id="ttt" class="seaEx">
            <h3 id="frt" style="margin:0;padding:0;padding:5px;font-size:1.5rem;">Frotu </h3>
            <div class="seaEC">
            <input oninput="srh2('#tabtran tbody tr')" id="seaa" type="text" placeholder="&#128269 Search.." > 
            
            </div>
            </div>
            
            <div class="ibet">
            
            <table id="frs">
            <thead>
            <tr>
            <th>Income</th>
            <th> Expense </th></th>
            <th> Balance </th>
            <th> Tran </th>
            </tr>
            </thead>
            <tbody class="frrrrr" id="frodda">
            <tr id="frodaIXP">
            <td id="froIN"> 0 </td><td id="froEXP"> 0 </td><td id="froBAL"> 0 </td><td id="froTRAN"> 0 </td>
            </tr>
            </tbody>
            </table>
            
            </div>
            
            <br><br>
            <div class="tabb">
            <table id="tabtran">
            <thead class="tabnkn">
            <tr>
            <th> Expense </th>
            <th> Date</th>
            <th> Purpose </th>
            </tr>
            </thead>
            <tbody class="frrrr" id="frodaEX">
            
 
            </tbody>
            </table>
      </div>
      
      
      </div>
      
      <div class="swiper-slide sl sl3">
      <div class="mivnkn">
      <button onclick="swiper.slideToLoop(2)"> <i class="fa-solid fa-less-than"></i>  Frotu Expence </button> <button onclick="location.href='finpulse.html'"> Black Road <i class="fa-solid fa-greater-than"></i></button>
      </div>
      <center> <h3> Frotu Statistics </h3></center>
     
      <div class="frotuCh">
      <canvas id="pieChart" width="100" height="100"></canvas>
      <canvas id="pieChartCat" width="100" height="50"></canvas>
      <canvas id="pieChartEx" width="100" height="50"></canvas>
      </div>
      <br>
      </div>
     
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
  const swiper = new Swiper('.s', {
  slidesPerView: 'auto',
  centeredSlides: true,
  spaceBetween: 0,
  initialSlide: 1,
  loop:true
  });
  
  </script>
  
  <script type="text/javascript">
  
  let fetFrotu = false;
  let frotuOBS = { froID: "", froED: "", froIXB: { inc: 0, exp: 0, bal: 0 } };
  let frotuCatOb={};
 
  async function getFrotu() {
  let intranf = document.getElementById("frodatr");
  let extranf = document.getElementById("frodaEX");
  let extranfIXB = document.getElementById("frodaIXP");
  
  const db = await new Promise((res, rej) => {
  const req = indexedDB.open("black");
  req.onsuccess = e => res(e.target.result);
  req.onerror = e => rej(e.target.error);
  });
  
  const tran = db.transaction(["sst"], 'readwrite');
  const sto = tran.objectStore("sst");
  let val = sto.get("frotuXMMXG");
  
  val.onsuccess = function () {
  let resu = val.result;
  if (!resu) return;
  
  frotuOBS = resu;
  fetFrotu = true;
 // alert(JSON.stringify(frotuOBS));
  intranf.innerHTML = resu.froID;
  extranf.innerHTML = resu.froED;
  
  extranfIXB.children[0].innerHTML = resu.froIXB.inc;
  extranfIXB.children[1].innerHTML = parseInt(resu.froIXB.exp);
  extranfIXB.children[2].innerHTML = resu.froIXB.bal;
 // alert(frotuOBS.froED);
 addclontrr();
 addclontrrEx();
  famtC();
  addCats();
  
  }
  setTimeout(()=>{
  shofroPie("NKN");
  },2000);
  }
  
  getFrotu();
  
  
  
  
  
  
  function getSumCat() {
  let rows = document.querySelectorAll("tr.froEPL");  
  let sums = {};  
  
  for (let i = 0; i < rows.length; i++) {  
  let row = rows[i];  
  let clsList = row.className.split(" ");  
  let cls = clsList[1];  
  let val = parseFloat(row.children[0].textContent) || 0;  
  
  if (!sums[cls]) {  
  sums[cls] = 0;  
  }  
  sums[cls] += val;  
  }  
  
  let result = [];  
  for (let key in sums) {  
  result.push({ category: key, sum: sums[key] });  
  }  
//  alert(JSON.stringify(result));
  return result;  
  
  }  
  
 // console.log(getSum());
  
  
  
  
  
  
  
  
 
  async function addfrotuIS() {
  let extranfIXB = document.getElementById("frodaIXP");
  
  let xd = await addFrotuISTemp();
  if (!xd) return;
  
  const db = await new Promise((res, rej) => {
  const req = indexedDB.open("black");
  req.onsuccess = e => res(e.target.result);
  req.onerror = e => rej(e.target.error);
  });
  
  const tran = db.transaction(["sst"], 'readwrite');
  const sto = tran.objectStore("sst");
  
  let elem = document.getElementById("frodatr");
  elem.insertBefore(xd.ele, elem.firstChild);
  
  let data = elem.innerHTML.replace(/\s+/g, ' ').trim();
  let nv = parseInt(xd.newVal);
  let isExpense = xd.type === 'expense'; 
  let inc = parseInt(frotuOBS.froIXB?.inc || 0);
  let exp = parseInt(frotuOBS.froIXB?.exp || 0);
  
  if (xd.Expense) {
  exp += nv;
  } else {
  inc += nv;
  
  }
  
  
  let bal = inc - exp;
  
  let frotuOBM = {
  froID: data,
  froED:"",
  froIXB: { inc, exp, bal }
  };
  
   let frtc=document.getElementById("frodaEX").innerHTML.replace(/\s+/g, ' ').trim();
  frotuOBM.froED=frtc;
  sto.put(frotuOBM, "frotuXMMXG");
  
  frotuOBS = frotuOBM;
  fetFrotu = true;
  
  extranfIXB.children[0].innerHTML = inc;
  extranfIXB.children[1].innerHTML = exp;
  extranfIXB.children[2].innerHTML = bal;

  famtC?.();
  addCats?.();
  shofroPie("CAT");
  setTimeout(()=>{
  location.reload();
  },1000);
  }
  
  
  function remFrotuIS(x) {
  let extranfIXB = document.getElementById("frodaIXP");
  
  if ((frotuOBS.froIXB.inc > frotuOBS.froIXB.exp) && (frotuOBS.froIXB.inc==frotuOBS.froIXB.exp+frotuOBS.froIXB.bal)) {
  let vau = parseInt(x.parentNode.children[0].innerHTML);
  let did = x.parentNode.children[1].innerHTML;
  let dide = x.parentNode.children[2].innerHTML;
  const ran = Math.floor(1000 + Math.random() * 9000);
  
  if(vau>frotuOBS.froIXB.bal){
    Swal.fire({
    title:`Current Balance : ${frotuOBS.froIXB.bal}`,
    text:`U Cant Delete This transaction beacause it already spent`,
    icon:"warning"
    });
  }else{
  
  Swal.fire({
  title: `Verify OTP : ${ran}`,
  html: `
  <h5> Are U Sure To Delete This Record <br><br>
  <span style="color:red"> Amount : </span> ${vau} <br>
  <span style="color:red"> Date : </span> ${did} <br>
  <span style="color:red"> Descryption : </span> ${dide} </h5>
  <input id="myInp" type="number" inputmode="numeric" placeholder="OTP" autocomplete="off" />
  `,
  showCancelButton: true,
  confirmButtonText: 'Submit',
  cancelButtonText: 'Cancel',
  preConfirm: () => {
  const input = document.getElementById('myInp').value;
  if (!input) Swal.showValidationMessage('You must enter an OTP!');
  else if (input !== ran.toString()) Swal.showValidationMessage('OTP does not match!');
  return input;
  }
  }).then(result => {
  if (result.isConfirmed) {
  x.parentNode.remove();
  let datat = document.getElementById("frodatr").innerHTML.replace(/\s+/g, ' ').trim();
  
  frotuOBS.froID = datat;
  frotuOBS.froIXB.inc -= vau;
  frotuOBS.froIXB.bal = frotuOBS.froIXB.inc - frotuOBS.froIXB.exp;
  
  const r = indexedDB.open("black");
  r.onsuccess = e => {
  const d = e.target.result;
  const t = d.transaction(["sst"], 'readwrite');
  const st = t.objectStore("sst");
  st.put(frotuOBS, "frotuXMMXG");
  
  extranfIXB.children[0].innerHTML = frotuOBS.froIXB.inc;
  extranfIXB.children[1].innerHTML = frotuOBS.froIXB.exp;
  extranfIXB.children[2].innerHTML = frotuOBS.froIXB.bal;
  
  famtC?.();
  addCats?.();
  shofroPie("CAT");
  Swal.fire('Success', 'Record Deleted from FROTU', 'success');
  };
  }
  });
  }
  } else {
  Swal.fire({
  text:"U Can't Delete This Frotu Income beacause its already Spent",
  icon:"warning"
  });
  }
  }
  
  
  
  function famtC(){
  
  let fam=document.getElementsByClassName("famt");
  let fsum=0;
  for(let f=0;f<fam.length;f++){
  if(fam[f].closest('tr').style.display !=='none'){
  fsum+=parseInt(fam[f].innerHTML);
  }
  
  
  }
  //alert(fsum);
  document.getElementById("fsu").innerHTML=`&Sigma; = ${fsum}`;
  
  }
  
  function addCats(){
  let ffamt=0;
  let ffrew=0;
  let ffpass=0;
  let ffun=0;
  let ffov=0;
  let ffoth=0;
  
  document.querySelectorAll(".free").forEach((x)=>{ ffamt+=parseInt(x.children[0].innerHTML) });
  document.querySelectorAll(".reward").forEach((x)=>{ ffrew+=parseInt(x.children[0].innerHTML) });
  document.querySelectorAll(".passive").forEach((x)=>{ ffpass+=parseInt(x.children[0].innerHTML) });
  document.querySelectorAll(".unknown").forEach((x)=>{ ffun+=parseInt(x.children[0].innerHTML) });
  document.querySelectorAll(".overtime").forEach((x)=>{ ffov+=parseInt(x.children[0].innerHTML) });
  document.querySelectorAll(".other").forEach((x)=>{ ffoth+=parseInt(x.children[0].innerHTML) });
  document.getElementById("ffr").innerHTML= ffamt;
  document.getElementById("frew").innerHTML= ffrew;
  document.getElementById("fpas").innerHTML= ffpass;
  document.getElementById("fun").innerHTML= ffun;
  document.getElementById("fot").innerHTML= ffov;
  document.getElementById("fo").innerHTML= ffoth;
  frotuCatOb={
  free:ffamt,
  reward:ffrew,
  passive:ffpass,
  unknown:ffun,
  overtime:ffov,
  other:ffoth
  };
  }
  
  
  
  
  
  
  
  
  
  
  
  async function addFrotuEX() {
  
  let ii=document.getElementById("froIN");
  let ee=document.getElementById("froEXP");
  let bb=document.getElementById("froBAL");
  if(parseInt(bb.innerHTML)<=0){
  Swal.fire({
  title:` Current Bal : ${bb.innerHTML}`,
  text:" U Can't Add Expense Due to Insufficient Balance",
  icon:"warning"
  });
  return
  }else{
  
  const { value: v } = await Swal.fire({
  title: `
  Current Balance : ${bb.innerHTML}`,
  html:
  `<h2>Enter Frotu Expence</h2>
  <input id="a" type="number" class="swal2-input" placeholder="Amount"><br><br>` +
  `<select id="c" class="swal2-input">
  <option value="">Select Category</option>
  <option value="food">Food</option>
  <option value="telephone"> Telephone </option>
  <option value="shopping"> Shopping </option>
  <option value="beauty"> Beauty </option>
  <option value="sport"> Sport </option>
  <option value="social"> Social </option>
  <option value="transporation"> Transporation </option>
  <option value="clothing"> Clothing </option>
  <option value="car"> Car </option>
  <option value="wine-cigaratte"> wine/cigaratte.. </option>
  <option value="eletronics"> Eletronics </option>
  <option value="travel">  Travel </option>
  <option value="health"> Health </option>
  <option value="pet"> Pet </option>
  <option value="repair">  Repair </option>
  <option value="housing"> Housing </option>
  <option value="home"> Home </option>
  <option value="gift"> Gift </option>
  <option value="donate"> Donate </option>
  <option value="other"> Others </option>
  </select><br><br>` +
  `<input id="d" type="date" class="swal2-input"><br><br>` +
  `<input id="ds" class="swal2-input" placeholder="Description">`,
  focusConfirm: false,
  showCloseButton:true,
  showCancelButton:true,
  preConfirm: () => {
  let a = document.getElementById("a").value;
  let c = document.getElementById("c").value;
  let d = document.getElementById("d").value;
  let ds = document.getElementById("ds").value;
  if (!a || !c || !d || !ds) return Swal.showValidationMessage("All fields required");
  if(a>parseInt(bb.innerHTML)){
  
 alert(`Insufficient Balance \n \n Current Balance ${frotuOBS.froIXB.bal}`);
  addFrotuEX();
  let a=0;
  let ds="insufficient balance";
  return { a, c, d, ds };
  }else{
  return { a, c, d, ds };
  }
  
  }
  
  });
  if (v){ 
  
  let sa=`
  <td> ${v.a}</td> <td>${v.d}</td> <td> ( ${v.c} ) ${v.ds} </td>
  `;
  
  let nee= document.createElement("tr");
  nee.className=`froEPL ${v.c}`;
  nee.innerHTML=sa;
  nee.onclick= function(){
  remfroEx(this)
  };
  
  let frt=document.getElementById("frodaEX");
  frt.insertBefore(nee,frt.firstChild);

 ee.innerHTML= parseInt(ee.innerHTML)+parseInt(v.a);
 bb.innerHTML = parseInt(bb.innerHTML)-parseInt(v.a); 
  
  
  const r = indexedDB.open("black");
  r.onsuccess = e => {
  const d = e.target.result;
  const t = d.transaction(["sst"], 'readwrite');
  const st = t.objectStore("sst");
  
  let frttt=document.getElementById("frodaEX").innerHTML.replace(/\s+/g, ' ').trim();
  //alert(frttt);
  frotuOBS.froED = frttt;
  frotuOBS.froIXB.exp +=parseInt(v.a);
  frotuOBS.froIXB.bal -= parseInt(v.a);
  
  st.put(frotuOBS, "frotuXMMXG");
  addclontrrEx();
  shofroPie("EXP");
  
  };
  
  }
  
  }
  
  
  
  
  
  
  
  
  
  async function addFrotuISTemp() {
  const { value: v } = await Swal.fire({
  title: "Enter Frotu Input",
  html:
  `<input id="a" type="number" class="swal2-input" placeholder="Amount"><br><br>` +
  `<select id="c" class="swal2-input">
  <option value="">Select Category</option>
  <option value="free">Free</option>
  <option value="reward">Rewards / Refunds </option>
  <option value="passive"> Passive Income / Divident </option>
  <option value="unknown"> Unknown </option>
  <option value="overtime"> Over Time </option>
  <option value="other"> Others </option>
  </select><br><br>` +
  `<input id="d" type="date" class="swal2-input"><br><br>` +
  `<input id="ds" class="swal2-input" placeholder="Description">`,
  focusConfirm: false,
  preConfirm: () => {
  let a = document.getElementById("a").value;
  let c = document.getElementById("c").value;
  let d = document.getElementById("d").value;
  let ds = document.getElementById("ds").value.replace(/<\/?[^>]+(>|$)/g, "");
  if (!a || !c || !d || !ds) return Swal.showValidationMessage("All fields required");
  return { a, c, d, ds };
  }
  });
  if (v){ 
  
  let sa=`
  <td onclick="remFrotuIS(this)" class="famt"> ${v.a}</td> <td onclick="remFrotuIS(this)">${v.d}</td> <td onclick="remFrotuIS(this)"> ( ${v.c} ) ${v.ds} </td>
  `;
  
  let nee= document.createElement("tr");
  nee.className=v.c;
  nee.innerHTML=sa;
  nee.onclick= function(){
  remFrotuIS(this);
  };
  
  let xxx={Expence:nee,newVal:v.a};
  Swal.fire({
  title:"Record Added Successfully",
  icon:"success"
  });
  return xxx;
  };
  }
  }
  
  
  function remfroEx(x){
  //alert(x.parentNode.children[0].innerHTML);
  let di= parseInt( x.parentNode.children[0].innerHTML);
  let did= parseInt(x.parentNode.children[1].innerHTML);
  let dide= parseInt( x.parentNode.children[2].innerHTML);
  
  let ii=document.getElementById("froIN");
  let ee=document.getElementById("froEXP");
  let bb=document.getElementById("froBAL");
  
  
  
  const ran = Math.floor(1000 + Math.random() * 9000);
  
  Swal.fire({
  title: `Verify OTP : ${ran}`,
  html: `
  <h5> Are U Sure To Delete This Record <br><br> <span style="color:red"> Amount : </span> ${di} <br> <span style="color:red"> Date : </span> ${did} <br> <span style="color:red"> Descryption : </span> ${dide} </h5>
  <input id="myInp" 
  type="number" 
  inputmode="numeric" 
  pattern="[0-9]*" 
  placeholder="OTP"
  autocomplete="off" />
  `,
  showCancelButton: true,
  confirmButtonText: 'Submit',
  cancelButtonText: 'Cancel',
  preConfirm: () => {
  const input = document.getElementById('myInp').value;
  if (!input) {
  Swal.showValidationMessage('You must enter a OTP!');
  } else if (input !== ran.toString()) {
  Swal.showValidationMessage('OTP does not match!');
  }
  return input;
  }
  }).then((result) => {
  if (result.isConfirmed) {
  ee.innerHTML=parseInt(ee.innerHTML)-parseInt(di);
  bb.innerHTML= parseInt(bb.innerHTML)+parseInt(di);
  
  x.parentNode.remove();
  let frttt=document.getElementById("frodaEX").innerHTML.replace(/\s+/g, ' ').trim();
  
  frotuOBS.froED = frttt;
  frotuOBS.froIXB.exp -=parseInt(di);
  frotuOBS.froIXB.bal += parseInt(di);
 // alert(JSON.stringify(frotuOBS));
 const r = indexedDB.open("black");
 r.onsuccess = e => {
 const d = e.target.result;
 const t = d.transaction(["sst"], 'readwrite');
 const st = t.objectStore("sst");
 
   st.put(frotuOBS, "frotuXMMXG");
  }
  famtC();
  addCats();
  shofroPie("EXP");
  Swal.fire('Success', 'Record Deleted from FROTU', 'success');
  //location.reload();
  }
  });
  
  
  
  }
  
  
  
  function srh(xf) {
  const searchValue = document.getElementById('sea').value.toLowerCase();
  const rows = document.querySelectorAll(xf);
  
  rows.forEach(row => {
  const cells = row.getElementsByTagName('td');
  let matchFound = false;
  
  for (let i = 0; i < cells.length; i++) {
  if (cells[i].textContent.toLowerCase().includes(searchValue)) {
  matchFound = true;
  break;
  }
  }
  
  row.style.display = matchFound ? '' : 'none';
  famtC();
  });
  
  famtC();
  }
  
  function srh2(xf) {
  const searchValue = document.getElementById('seaa').value.toLowerCase();
  const rows = document.querySelectorAll(xf);
  
  rows.forEach(row => {
  const cells = row.getElementsByTagName('td');
  let matchFound = false;
  
  for (let i = 0; i < cells.length; i++) {
  if (cells[i].textContent.toLowerCase().includes(searchValue)) {
  matchFound = true;
  break;
  }
  }
  
  row.style.display = matchFound ? '' : 'none';
 famtCX();
  });
  
 famtCX();
  }
  
  
  
  function famtCX(){
  
  let fam=document.getElementsByClassName("expamt");
  let fsum=0;
  for(let f=0;f<fam.length;f++){
  if(fam[f].closest('tr').style.display !=='none'){
  fsum+=parseInt(fam[f].innerHTML);
  }
  
  }
  //alert(fsum);
  document.getElementById("froTRAN").innerHTML=fsum;
  
  }



  function addclontrr(){
    let x = document.getElementById("frodatr");
    Array.from(x.children).forEach((m,c)=>{
      Array.from(m.children).forEach((u,i)=>{
      if(i===0){
             u.className="famt";
             u.onclick= function(){
    remFrotuIS(this)
    };
      }else{
        u.onclick= function(){
    remFrotuIS(this)
    };
      }
    });
    });
  }





  function addclontrrEx(){
    let x = document.getElementById("frodaEX");
      
   Array.from(x.children).forEach((v,b)=>{
    Array.from(v.children).forEach((n,m)=>{
      if(m===0){
       n.className="expamt";
       n.onclick= function(){
  remfroEx(this)
  };
      }else{
        n.onclick= function(){
  remfroEx(this)
  };
      }
    });
   });

    
  }
  </script>
  
  
  
 <script src="frotu-temp.js"> </script>
   <script src="frotu-cha.js"></script>
</body>

</html>