<html>
<head>
  <title>Black Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <style type="text/css">
  form{
  margin-top:20%;
  }
  body{
   background-color:black;
   color:white;
   
  }
  input,button{
  padding:20px;
  }
  
  </style>
</head>
<body>
<center>
<br><br>
<h3> Black Road - Login </h3>
  <form id="f">
    <input type="text" id="u" placeholder="Username" required><br><br>
    <input type="password" id="p" placeholder="Password" required><br><br>
    <button type="submit">Login</button>
  </form>
</center>
  <script>

    function s() {
  var n = "blackroadC";
  if (document.cookie.split('; ').find(r => r.startsWith(n + '='))) {
    window.location.href = "finpulse.html";
  } 
}
s();
    
    document.getElementById('f').addEventListener('submit', e => {
      e.preventDefault();
      const u = document.getElementById('u').value;
      const p = document.getElementById('p').value;

      const r = indexedDB.open("black", 2);

      r.onupgradeneeded = e => {
        const d = e.target.result;
        if (!d.objectStoreNames.contains("sst")) {
          d.createObjectStore("sst");
        }
      };

      r.onsuccess = e => {
        const d = e.target.result;
        console.log("DB ready");
        function s() {
  var n = "blacroadC";
  if (document.cookie.split('; ').find(r => r.startsWith(n + '='))) {
    window.location.href = "finpulse.html";
  } else {
    var d = new Date();
    d.setMonth(d.getMonth() + 1);
    document.cookie = n + "=1; expires=" + d.toUTCString() + "; path=/";
  }
}
s();
        location.href="finpulse.html;
      };

      r.onerror = e => {
        console.error("DB error");
      };
    });
  </script>
</body>
</html>
